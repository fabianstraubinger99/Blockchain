package com.company;


import com.hedera.hashgraph.sdk.*;
import com.hedera.hashgraph.sdk.proto.ContractCreate;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import io.github.cdimascio.dotenv.Dotenv;
import org.bouncycastle.util.encoders.Hex;

import java.nio.charset.StandardCharsets;
import java.util.concurrent.TimeoutException;

public class Main {
    private final static Logger logger = LoggerFactory.getLogger(Main.class);

    public static void main(String[] args) throws PrecheckStatusException, TimeoutException, ReceiptStatusException {

        //Grab your Hedera Testnet account ID and private key
        AccountId myAccountId = AccountId.fromString(Dotenv.load().get("MY_ACCOUNT_ID"));
        PrivateKey myPrivateKey = PrivateKey.fromString(Dotenv.load().get("MY_PRIVATE_KEY"));

        //Create your Hedera Testnet client
        Client client = Client.forTestnet();

        //Set your account as the client's operator
        client.setOperator(myAccountId, myPrivateKey);

        //Set the default maximum transaction fee (in Hbar)
        client.setDefaultMaxTransactionFee(new Hbar(5000));

        //Set the maximum payment for queries (in Hbar)
        client.setMaxQueryPayment(new Hbar(2000));




        //Create the account info query
        AccountInfoQuery query = new AccountInfoQuery()
                .setAccountId(myAccountId);

        //Submit the query to a Hedera network
        AccountInfo accountInfo = query.execute(client);

        //Print the account key to the console
        System.out.println(accountInfo);


        String object = "608060405234801561000f575f80fd5b50335f806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550611c888061005c5f395ff3fe608060405234801561000f575f80fd5b506004361061009c575f3560e01c8063a5e86fec11610064578063a5e86fec14610158578063a6f9dae114610174578063bed34bba14610190578063da04bf01146101c0578063db524123146101dc5761009c565b806308b965eb146100a057806327eb5576146100bc5780632e5c28bd146100da578063614f31801461010a578063893d20e81461013a575b5f80fd5b6100ba60048036038101906100b59190611424565b6101fa565b005b6100c46102b1565b6040516100d191906115a0565b60405180910390f35b6100f460048036038101906100ef919061161a565b6107b5565b604051610101919061165d565b60405180910390f35b610124600480360381019061011f919061161a565b6107fe565b6040516101319190611785565b60405180910390f35b61014261099b565b60405161014f91906117b4565b60405180910390f35b610172600480360381019061016d919061161a565b6109c2565b005b61018e6004803603810190610189919061161a565b610a68565b005b6101aa60048036038101906101a591906117cd565b610b05565b6040516101b79190611852565b60405180910390f35b6101da60048036038101906101d59190611424565b610b5d565b005b6101e4610d20565b6040516101f191906115a0565b60405180910390f35b5f60405180604001604052808381526020015f1515815250905060015f3373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2081908060018154018082558091505060019003905f5260205f2090600202015f909190919091505f820151815f01908161028b9190611a65565b506020820151816001015f6101000a81548160ff02191690831515021790555050505050565b60605f805f5b60015f3373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2080549050811015610486575f60015f3373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20828154811061034f5761034e611b34565b5b905f5260205f2090600202015f01805461036890611898565b80601f016020809104026020016040519081016040528092919081815260200182805461039490611898565b80156103df5780601f106103b6576101008083540402835291602001916103df565b820191905f5260205f20905b8154815290600101906020018083116103c257829003601f168201915b505050505090505f151560015f3373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20838154811061043857610437611b34565b5b905f5260205f2090600202016001015f9054906101000a900460ff16151514801561046457505f815114155b1561047857838061047490611b8e565b9450505b5080806001019150506102b7565b505f8267ffffffffffffffff8111156104a2576104a1611300565b5b6040519080825280602002602001820160405280156104d557816020015b60608152602001906001900390816104c05790505b5090505f5b60015f3373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20805490508110156107ab575f60015f3373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20828154811061057257610571611b34565b5b905f5260205f2090600202015f01805461058b90611898565b80601f01602080910402602001604051908101604052809291908181526020018280546105b790611898565b80156106025780601f106105d957610100808354040283529160200191610602565b820191905f5260205f20905b8154815290600101906020018083116105e557829003601f168201915b505050505090505f151560015f3373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20838154811061065b5761065a611b34565b5b905f5260205f2090600202016001015f9054906101000a900460ff16151514801561068757505f815114155b1561079d5760015f3373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2082815481106106db576106da611b34565b5b905f5260205f2090600202015f0180546106f490611898565b80601f016020809104026020016040519081016040528092919081815260200182805461072090611898565b801561076b5780601f106107425761010080835404028352916020019161076b565b820191905f5260205f20905b81548152906001019060200180831161074e57829003601f168201915b505050505083858151811061078357610782611b34565b5b6020026020010181905250838061079990611b8e565b9450505b5080806001019150506104da565b5080935050505090565b5f60015f8373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20805490509050919050565b60605f8054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161461085b5761085a611bd5565b5b60015f8373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20805480602002602001604051908101604052809291908181526020015f905b82821015610990578382905f5260205f2090600202016040518060400160405290815f820180546108e790611898565b80601f016020809104026020016040519081016040528092919081815260200182805461091390611898565b801561095e5780601f106109355761010080835404028352916020019161095e565b820191905f5260205f20905b81548152906001019060200180831161094157829003601f168201915b50505050508152602001600182015f9054906101000a900460ff161515151581525050815260200190600101906108b7565b505050509050919050565b5f805f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905090565b5f8054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614610a1d57610a1c611bd5565b5b60015f8273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f610a659190611226565b50565b5f8054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614610ac357610ac2611bd5565b5b805f806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555050565b5f81604051602001610b179190611c3c565b6040516020818303038152906040528051906020012083604051602001610b3e9190611c3c565b6040516020818303038152906040528051906020012014905092915050565b5f5b60015f3373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2080549050811015610d1c57610c9460015f3373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f208281548110610bf957610bf8611b34565b5b905f5260205f2090600202015f018054610c1290611898565b80601f0160208091040260200160405190810160405280929190818152602001828054610c3e90611898565b8015610c895780601f10610c6057610100808354040283529160200191610c89565b820191905f5260205f20905b815481529060010190602001808311610c6c57829003601f168201915b505050505083610b05565b15610d0f576001805f3373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f208281548110610ce957610ce8611b34565b5b905f5260205f2090600202016001015f6101000a81548160ff0219169083151502179055505b8080600101915050610b5f565b5050565b60605f805f5b60015f3373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2080549050811015610ef6575f60015f3373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f208281548110610dbe57610dbd611b34565b5b905f5260205f2090600202015f018054610dd790611898565b80601f0160208091040260200160405190810160405280929190818152602001828054610e0390611898565b8015610e4e5780601f10610e2557610100808354040283529160200191610e4e565b820191905f5260205f20905b815481529060010190602001808311610e3157829003601f168201915b505050505090506001151560015f3373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f208381548110610ea857610ea7611b34565b5b905f5260205f2090600202016001015f9054906101000a900460ff161515148015610ed457505f815114155b15610ee8578380610ee490611b8e565b9450505b508080600101915050610d26565b505f8267ffffffffffffffff811115610f1257610f11611300565b5b604051908082528060200260200182016040528015610f4557816020015b6060815260200190600190039081610f305790505b5090505f5b60015f3373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f208054905081101561121c575f60015f3373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f208281548110610fe257610fe1611b34565b5b905f5260205f2090600202015f018054610ffb90611898565b80601f016020809104026020016040519081016040528092919081815260200182805461102790611898565b80156110725780601f1061104957610100808354040283529160200191611072565b820191905f5260205f20905b81548152906001019060200180831161105557829003601f168201915b505050505090506001151560015f3373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2083815481106110cc576110cb611b34565b5b905f5260205f2090600202016001015f9054906101000a900460ff1615151480156110f857505f815114155b1561120e5760015f3373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20828154811061114c5761114b611b34565b5b905f5260205f2090600202015f01805461116590611898565b80601f016020809104026020016040519081016040528092919081815260200182805461119190611898565b80156111dc5780601f106111b3576101008083540402835291602001916111dc565b820191905f5260205f20905b8154815290600101906020018083116111bf57829003601f168201915b50505050508385815181106111f4576111f3611b34565b5b6020026020010181905250838061120a90611b8e565b9450505b508080600101915050610f4a565b5080935050505090565b5080545f8255600202905f5260205f20908101906112449190611247565b50565b5b8082111561127b575f8082015f61125f919061127f565b600182015f6101000a81549060ff021916905550600201611248565b5090565b50805461128b90611898565b5f825580601f1061129c57506112b9565b601f0160209004905f5260205f20908101906112b891906112bc565b5b50565b5b808211156112d3575f815f9055506001016112bd565b5090565b5f604051905090565b5f80fd5b5f80fd5b5f80fd5b5f80fd5b5f601f19601f8301169050919050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52604160045260245ffd5b611336826112f0565b810181811067ffffffffffffffff8211171561135557611354611300565b5b80604052505050565b5f6113676112d7565b9050611373828261132d565b919050565b5f67ffffffffffffffff82111561139257611391611300565b5b61139b826112f0565b9050602081019050919050565b828183375f83830152505050565b5f6113c86113c384611378565b61135e565b9050828152602081018484840111156113e4576113e36112ec565b5b6113ef8482856113a8565b509392505050565b5f82601f83011261140b5761140a6112e8565b5b813561141b8482602086016113b6565b91505092915050565b5f60208284031215611439576114386112e0565b5b5f82013567ffffffffffffffff811115611456576114556112e4565b5b611462848285016113f7565b91505092915050565b5f81519050919050565b5f82825260208201905092915050565b5f819050602082019050919050565b5f81519050919050565b5f82825260208201905092915050565b5f5b838110156114cb5780820151818401526020810190506114b0565b5f8484015250505050565b5f6114e082611494565b6114ea818561149e565b93506114fa8185602086016114ae565b611503816112f0565b840191505092915050565b5f61151983836114d6565b905092915050565b5f602082019050919050565b5f6115378261146b565b6115418185611475565b93508360208202850161155385611485565b805f5b8581101561158e578484038952815161156f858261150e565b945061157a83611521565b925060208a01995050600181019050611556565b50829750879550505050505092915050565b5f6020820190508181035f8301526115b8818461152d565b905092915050565b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6115e9826115c0565b9050919050565b6115f9816115df565b8114611603575f80fd5b50565b5f81359050611614816115f0565b92915050565b5f6020828403121561162f5761162e6112e0565b5b5f61163c84828501611606565b91505092915050565b5f819050919050565b61165781611645565b82525050565b5f6020820190506116705f83018461164e565b92915050565b5f81519050919050565b5f82825260208201905092915050565b5f819050602082019050919050565b5f8115159050919050565b6116b38161169f565b82525050565b5f604083015f8301518482035f8601526116d382826114d6565b91505060208301516116e860208601826116aa565b508091505092915050565b5f6116fe83836116b9565b905092915050565b5f602082019050919050565b5f61171c82611676565b6117268185611680565b93508360208202850161173885611690565b805f5b85811015611773578484038952815161175485826116f3565b945061175f83611706565b925060208a0199505060018101905061173b565b50829750879550505050505092915050565b5f6020820190508181035f83015261179d8184611712565b905092915050565b6117ae816115df565b82525050565b5f6020820190506117c75f8301846117a5565b92915050565b5f80604083850312156117e3576117e26112e0565b5b5f83013567ffffffffffffffff811115611800576117ff6112e4565b5b61180c858286016113f7565b925050602083013567ffffffffffffffff81111561182d5761182c6112e4565b5b611839858286016113f7565b9150509250929050565b61184c8161169f565b82525050565b5f6020820190506118655f830184611843565b92915050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52602260045260245ffd5b5f60028204905060018216806118af57607f821691505b6020821081036118c2576118c161186b565b5b50919050565b5f819050815f5260205f209050919050565b5f6020601f8301049050919050565b5f82821b905092915050565b5f600883026119247fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff826118e9565b61192e86836118e9565b95508019841693508086168417925050509392505050565b5f819050919050565b5f61196961196461195f84611645565b611946565b611645565b9050919050565b5f819050919050565b6119828361194f565b61199661198e82611970565b8484546118f5565b825550505050565b5f90565b6119aa61199e565b6119b5818484611979565b505050565b5b818110156119d8576119cd5f826119a2565b6001810190506119bb565b5050565b601f821115611a1d576119ee816118c8565b6119f7846118da565b81016020851015611a06578190505b611a1a611a12856118da565b8301826119ba565b50505b505050565b5f82821c905092915050565b5f611a3d5f1984600802611a22565b1980831691505092915050565b5f611a558383611a2e565b9150826002028217905092915050565b611a6e82611494565b67ffffffffffffffff811115611a8757611a86611300565b5b611a918254611898565b611a9c8282856119dc565b5f60209050601f831160018114611acd575f8415611abb578287015190505b611ac58582611a4a565b865550611b2c565b601f198416611adb866118c8565b5f5b82811015611b0257848901518255600182019150602085019450602081019050611add565b86831015611b1f5784890151611b1b601f891682611a2e565b8355505b6001600288020188555050505b505050505050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52603260045260245ffd5b7f4e487b71000000000000000000000000000000000000000000000000000000005f52601160045260245ffd5b5f611b9882611645565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8203611bca57611bc9611b61565b5b600182019050919050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52600160045260245ffd5b5f81905092915050565b5f611c1682611494565b611c208185611c02565b9350611c308185602086016114ae565b80840191505092915050565b5f611c478284611c0c565b91508190509291505056fea264697066735822122016f06c2e808f7d6b9b462794df1d5a0830c97c880be7d185a65faa807da9825c64736f6c63430008160033";
        byte[] bytecode = object.getBytes(StandardCharsets.UTF_8);
        byte[] bytecodeHex = Hex.decode(bytecode);


        ContractCreateFlow contractCreate = new ContractCreateFlow()
                .setBytecode(bytecodeHex)
                .setGas(900_000);


//Sign the transaction with the client operator key and submit to a Hedera network
        TransactionResponse txResponse = contractCreate.execute(client);

//Get the receipt of the transaction
        TransactionReceipt receipt = txResponse.getReceipt(client);

//Get the new contract ID 0.0.7764873
        ContractId newContractId = receipt.contractId;

        System.out.println("The new contract ID is " +newContractId);




    }
}
